{% extends 'layout/base.twig' %}

{% block title %}
	Dashboard - Ticko
{% endblock %}

{% block content %}
	{# Include the dashboard header component #}
	{% include 'components/dashboard/header.twig' %}

	<main class="pt-14">
		<section class="p-12 max-w-[1440px] mx-auto">
			<h2 class="text-2xl font-bold">Welcome
				<span id="user-email"></span>
			</h2>

			<!-- Stats Grid -->
			<div class="mt-8">
				<div
					class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="stats-grid"><!-- Stats will be dynamically inserted here -->
				</div>
			</div>

			<!-- Quick Actions -->
			<div class="mt-8 border border-gray-200 rounded-lg shadow-sm bg-white">
				<h3 class="px-6 pt-6 text-xl font-semibold">Quick Actions</h3>
				<div class="p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
					<a href="/twig-ticket-app/tickets/create" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-all cursor-pointer">
						<div class="text-2xl mb-2">
							<svg class="w-12 h-12 text-black" fill="none" stroke="currentColor" viewbox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
							</svg>
						</div>
						<h3 class="font-semibold text-sm mb-1">Create New Ticket</h3>
						<p class="text-xs text-gray-600">Start a new ticket to create a new issue</p>
					</a>

					<a href="/twig-ticket-app/tickets" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-all cursor-pointer">
						<div class="text-2xl mb-2">
							<svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"/>
							</svg>
						</div>
						<h3 class="font-semibold text-sm mb-1">View All Tickets</h3>
						<p class="text-xs text-gray-600">Browse and manage all tickets</p>
					</a>

					<a href="/twig-ticket-app/tickets/active" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-all cursor-pointer">
						<div class="text-2xl mb-2">
							<svg class="w-12 h-12 text-amber-600" fill="none" stroke="currentColor" viewbox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
							</svg>
						</div>
						<h3 class="font-semibold text-sm mb-1">View Active Tickets</h3>
						<p class="text-xs text-gray-600">See all tickets currently in progress</p>
					</a>
				</div>
			</div>

			<!-- Recent Tickets -->
			<section class="mt-8">
				<div class="border border-gray-200 rounded-lg shadow-sm bg-white my-8">
					<div class="p-6 border-b border-gray-200">
						<div class="flex justify-between items-center">
							<h3 class="text-xl font-semibold">Recent Tickets</h3>
							<a href="/twig-ticket-app/tickets" class="px-4 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50 transition-colors">
								View All â†’
							</a>
						</div>
					</div>
					<div class="p-6">
						<div
							id="tickets-container" class="space-y-3"><!-- Tickets will be dynamically inserted here -->
						</div>
						<p id="no-tickets" class="text-center text-gray-600 py-8 hidden">
							No tickets yet. Create your first ticket!
						</p>
					</div>
				</div>
			</section>
		</section>
	</main>

	<!-- Delete Confirmation Dialog -->
	<div id="deleteDialog" class="fixed inset-0 bg-black/20 flex items-center justify-center p-4 z-50 hidden">
		<div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6" onclick="event.stopPropagation()">
			<h2 class="text-xl font-bold text-gray-900 mb-2">Delete Ticket?</h2>
			<p class="text-gray-600 mb-6">
				Are you sure you want to delete "<span id="delete-ticket-title"></span>"? This action cannot be undone.
			</p>
			<div class="flex gap-3 justify-end">
				<button onclick="cancelDelete()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
					Cancel
				</button>
				<button onclick="confirmDelete()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
					Delete
				</button>
			</div>
		</div>
	</div>
{% endblock %}

{% block scripts %}
<script src="/twig-ticket-app/public/js/dashboard.js"></script>


{% endblock %}
